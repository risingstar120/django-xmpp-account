{% extends "base.html" %}
{% load i18n %}

{% block content %}
<div class="page-header">
    <h1>{% block title %}{% trans "Account registration" %}{% endblock title %}</h1>
</div>

{% if form.is_valid %}{# successfull registration - don't display form! #}
<div class="alert alert-success">
{% blocktrans with email=form.email.value %}<strong>Thank you for your registration!</strong><br />
Please click at the confirmation link you have recieved at {{ email }} to complete your registration.
{% endblocktrans %}
</div>
{% else %}

{% if request.method == "POST" %}{# POST but with field errors #}
<div class="alert alert-danger">
{% trans "<strong>Error:</strong> There have been errors with your submission. Please see the errors below." %}
</div>
{% endif %}

<form role="form" action="" method="post">{% csrf_token %}
    {{ form.non_field_errors }}
    {% for hidden in form.hidden_fields %}
        {{ hidden }}
    {% endfor %}

    {% with email=form.email %}
        {% include "core/forms/email.html" %}
    {% endwith %}

    {% with value=form.value %}
        {% include "core/forms/value.html" %}
    {% endwith %}

    {% with username=form.username domain=form.domain %}
        {% include "core/forms/jid.html" %}
    {% endwith %}

    <button type="submit" class="btn btn-default">{% trans "Register" %}</button>
</form>
{% endif %}

{% endblock content %}
